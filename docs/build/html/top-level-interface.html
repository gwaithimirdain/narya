

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Top level interface &mdash; Narya 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Built-in types" href="built-in-types.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Narya
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Top level interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-flags">Command-line flags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#execution-behavior">Execution behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formatting-output">Formatting output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controlling-parametricity">Controlling parametricity</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#execution">Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proofgeneral-mode">ProofGeneral mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#key-commands">Key commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#for-agda-users">For Agda users</a></li>
<li class="toctree-l3"><a class="reference internal" href="#syntax-highlighting">Syntax highlighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#entering-unicode-characters">Entering Unicode characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-customization">Other customization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#code-formatter">Code formatter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jsnarya">jsNarya</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="built-in-types.html">Built-in types</a></li>
<li class="toctree-l1"><a class="reference internal" href="names-and-notations.html">Names and notations</a></li>
<li class="toctree-l1"><a class="reference internal" href="imports-and-scoping.html">Imports and scoping</a></li>
<li class="toctree-l1"><a class="reference internal" href="typechecking.html">Typechecking details</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive.html">Interactive proof</a></li>
<li class="toctree-l1"><a class="reference internal" href="record-types.html">Record types and tuples</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-types.html">Inductive datatypes and matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="codata-types.html">Codatatypes and comatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="canonical-types.html">Canonical types defined by case trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="mutual-definitions.html">Mutual definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="parametric-observational-type-theory.html">Parametric Observational Type Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="remarks.html">Remarks on implementation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Narya</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Top level interface</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/top-level-interface.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="top-level-interface">
<h1>Top level interface<a class="headerlink" href="#top-level-interface" title="Link to this heading"></a></h1>
<section id="command-line-flags">
<h2>Command-line flags<a class="headerlink" href="#command-line-flags" title="Link to this heading"></a></h2>
<p>The Narya executable accepts at least the following command-line flags.</p>
<section id="execution-behavior">
<h3>Execution behavior<a class="headerlink" href="#execution-behavior" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-interactive</span></code> or <code class="docutils literal notranslate"><span class="pre">-i</span></code>: Enter interactive mode (see below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-exec</span> <span class="pre">STRING</span></code> or <code class="docutils literal notranslate"><span class="pre">-e</span> <span class="pre">STRING</span></code>: Execute a string argument (see below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-source-only</span></code>: Load all files from source, ignoring any compiled versions</p></li>
</ul>
</section>
<section id="formatting-output">
<h3>Formatting output<a class="headerlink" href="#formatting-output" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-verbose</span></code> or <code class="docutils literal notranslate"><span class="pre">-v</span></code>: Show verbose messages</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-unicode</span></code> and <code class="docutils literal notranslate"><span class="pre">-ascii</span></code>: Display and reformat code using Unicode (default) or ASCII</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-no-reformat</span></code>: Do not automatically reformat source files (see below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-show-function-boundaries</span></code>: Display boundaries of functions, when implicit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-hide-function-boundaries</span></code>: Hide boundaries of functions, when implicit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-show-type-boundaries</span></code>: Display boundaries of functions, when implicit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-hide-type-boundaries</span></code>: Hide boundaries of functions, when implicit</p></li>
</ul>
</section>
<section id="controlling-parametricity">
<h3>Controlling parametricity<a class="headerlink" href="#controlling-parametricity" title="Link to this heading"></a></h3>
<p>These options are discussed further below.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-arity</span> <span class="pre">N</span></code>: Set the arity of parametricity to N (1 ≤ N ≤ 9)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-direction</span> <span class="pre">X</span></code>: Set the symbol and names for reflexivity</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-internal</span></code> and <code class="docutils literal notranslate"><span class="pre">-external</span></code>: Set whether parametricity is internal (default) or external</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-discreteness</span></code>: Enable strictly parametrically discrete types</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-dtt</span></code>: Poor man’s dTT mode (<code class="docutils literal notranslate"><span class="pre">-arity</span> <span class="pre">1</span> <span class="pre">-direction</span> <span class="pre">d</span> <span class="pre">-external</span></code>)</p></li>
</ul>
</section>
</section>
<section id="execution">
<h2>Execution<a class="headerlink" href="#execution" title="Link to this heading"></a></h2>
<p>When the Narya executable is run, it loads all the files given on its command line and any strings supplied on the command line with <code class="docutils literal notranslate"><span class="pre">-e</span></code>.  As usual, the special filename <code class="docutils literal notranslate"><span class="pre">-</span></code> refers to standard input.  Files and strings are loaded in the order they are given on the command line; all files must have the extension <code class="docutils literal notranslate"><span class="pre">.ny</span></code>.  Lastly, if <code class="docutils literal notranslate"><span class="pre">-i</span></code> was given anywhere on the command line, Narya enters interactive mode.</p>
<p>In interactive mode, commands typed by the user are executed as they are entered.  Since many commands span multiple lines, Narya waits for a blank line before parsing and executing the command(s) being entered.  Make sure to enter a blank line before starting a new command; interactive commands must be entered and executed one at a time.  The result of the command is printed (more verbosely than is usual when loading a file) and then the user can enter more commands.  Type Control+D to exit interactive mode, or enter the command <code class="docutils literal notranslate"><span class="pre">quit</span></code>.  In addition, in interactive mode you can enter a term instead of a command, and Narya will assume you mean to <code class="docutils literal notranslate"><span class="pre">echo</span></code> it (see below).</p>
</section>
<section id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Link to this heading"></a></h2>
<p>In a file, conventionally each command begins on a new line, but this is not technically necessary since each command begins with a keyword that has no other meaning.  (Similarly, a command-line <code class="docutils literal notranslate"><span class="pre">-e</span></code> string may contain multiple commands as long as whitespace separates them.)  Indentation is not significant, but there is a built-in code reformatter (see below) that is on by default, enforcing a uniform indentation style.  The available commands in a file or <code class="docutils literal notranslate"><span class="pre">-e</span></code> string are the following.</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">NAME</span> <span class="pre">[PARAMS]</span> <span class="pre">[:</span> <span class="pre">TYPE]</span> <span class="pre">≔</span> <span class="pre">TERM</span> <span class="pre">[and</span> <span class="pre">...]</span></code></p>
<p>Define a global constant called <code class="docutils literal notranslate"><span class="pre">NAME</span></code> having type <code class="docutils literal notranslate"><span class="pre">TYPE</span></code> and value <code class="docutils literal notranslate"><span class="pre">TERM</span></code>.  Thus <code class="docutils literal notranslate"><span class="pre">NAME</span></code> must be a valid identifier (see below) with no current definition in scope, while <code class="docutils literal notranslate"><span class="pre">TYPE</span></code> must parse and typecheck as a type, and <code class="docutils literal notranslate"><span class="pre">TERM</span></code> must parse and typecheck at type <code class="docutils literal notranslate"><span class="pre">TYPE</span></code>.  If <code class="docutils literal notranslate"><span class="pre">TYPE</span></code> is omitted, then <code class="docutils literal notranslate"><span class="pre">TERM</span></code> must synthesize a type (see below).  In addition, if <code class="docutils literal notranslate"><span class="pre">TYPE</span></code> is specified, then <code class="docutils literal notranslate"><span class="pre">TERM</span></code> can also be a case tree or canonical type declaration (see below).  The optional <code class="docutils literal notranslate"><span class="pre">PARAMS</span></code> is a list of parameters of the form <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">:</span> <span class="pre">PTY)</span></code>, or more generally <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">y</span> <span class="pre">z</span> <span class="pre">:</span> <span class="pre">PTY)</span></code>, with the effect that the actual type of the constant <code class="docutils literal notranslate"><span class="pre">NAME</span></code> is the Π-type of <code class="docutils literal notranslate"><span class="pre">TYPE</span></code> (or the synthesized type of <code class="docutils literal notranslate"><span class="pre">TERM</span></code>) over these parameters, and its value is the λ-abstraction of <code class="docutils literal notranslate"><span class="pre">TERM</span></code> over them.  That is, <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">foo</span> <span class="pre">(x:A)</span> <span class="pre">:</span> <span class="pre">B</span> <span class="pre">≔</span> <span class="pre">M</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">foo</span> <span class="pre">:</span> <span class="pre">A</span> <span class="pre">→</span> <span class="pre">B</span> <span class="pre">≔</span> <span class="pre">x</span> <span class="pre">↦</span> <span class="pre">M</span></code>.  Finally, a family of constants can be defined mutually by using the <code class="docutils literal notranslate"><span class="pre">and</span></code> keyword to introduce the second and later ones (see below).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">axiom</span> <span class="pre">NAME</span> <span class="pre">[PARAMS]</span> <span class="pre">:</span> <span class="pre">TYPE</span></code></p>
<p>Assert a global constant called <code class="docutils literal notranslate"><span class="pre">NAME</span></code> having type <code class="docutils literal notranslate"><span class="pre">TYPE</span></code>, without any definition (an axiom).  Parameters and names are treated as for <code class="docutils literal notranslate"><span class="pre">def</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">TERM</span></code></p>
<p>Normalize <code class="docutils literal notranslate"><span class="pre">TERM</span></code> and print its value and its type to standard output.  Note that <code class="docutils literal notranslate"><span class="pre">TERM</span></code> must synthesize a type (see below); if it is a checking term you must ascribe it.  In interactive mode, if you enter a term instead of a command, Narya assumes you mean to <code class="docutils literal notranslate"><span class="pre">echo</span></code> that term.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">synth</span> <span class="pre">TERM</span></code></p>
<p>Like <code class="docutils literal notranslate"><span class="pre">echo</span></code>, but does not normalize the term, only computes its type.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">notation</span> <span class="pre">[TIGHTNESS]</span> <span class="pre">NAME</span> <span class="pre">:</span> <span class="pre">[…]</span> <span class="pre">PATTERN</span> <span class="pre">[…]</span> <span class="pre">≔</span> <span class="pre">HEAD</span> <span class="pre">ARGUMENTS</span></code></p>
<p>Declare a new mixfix notation.  Every notation must have a <code class="docutils literal notranslate"><span class="pre">NAME</span></code>, which is an identifier like the name of a constant, and a <code class="docutils literal notranslate"><span class="pre">TIGHTNESS</span></code> unless it is outfix (see below).  The <code class="docutils literal notranslate"><span class="pre">PATTERN</span></code> of a notation is discussed below.  The value of a notation consists of a <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>, which is either a previously defined constant or a datatype constructor (see below), followed by the <code class="docutils literal notranslate"><span class="pre">ARGUMENTS</span></code> that must consist of exactly the variables appearing in the pattern, once each, in some order.</p>
</li>
<li></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>import<span class="w"> </span><span class="s2">&quot;FILE&quot;</span>
import<span class="w"> </span><span class="s2">&quot;FILE&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>MOD
</pre></div>
</div>
<p>Add the extension <code class="docutils literal notranslate"><span class="pre">.ny</span></code> to the double-quoted string <code class="docutils literal notranslate"><span class="pre">FILE</span></code> and import the file at that location (either absolute or relative to the location of the current file), with the optional modifier <code class="docutils literal notranslate"><span class="pre">MOD</span></code> applied to its namespace (see below).  The disk file <em>must</em> have the <code class="docutils literal notranslate"><span class="pre">.ny</span></code> extension, whereas the string given to <code class="docutils literal notranslate"><span class="pre">import</span></code> must <em>not</em> have it; this is because in the future the string given to <code class="docutils literal notranslate"><span class="pre">import</span></code> will be a more general “library identifier” in the <a class="reference external" href="https://redprl.org/bantorra/bantorra/index.html">bantorra</a> framework.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>import<span class="w"> </span>NAME
import<span class="w"> </span>NAME<span class="w"> </span><span class="p">|</span><span class="w"> </span>MOD
</pre></div>
</div>
<p>Import the namespace rooted at <code class="docutils literal notranslate"><span class="pre">NAME</span></code> into the current top-level namespace, with the optional modifier <code class="docutils literal notranslate"><span class="pre">MOD</span></code> applied to it first.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="s2">&quot;FILE&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="s2">&quot;FILE&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>MOD
<span class="nb">export</span><span class="w"> </span>NAME
<span class="nb">export</span><span class="w"> </span>NAME<span class="w"> </span><span class="p">|</span><span class="w"> </span>MOD
</pre></div>
</div>
<p>Same as above, but also export the new names to other files that import this one.</p>
<ol class="arabic" start="7">
<li><p><code class="docutils literal notranslate"><span class="pre">section</span> <span class="pre">NAME</span> <span class="pre">≔</span></code></p>
<p>Begin a section named <code class="docutils literal notranslate"><span class="pre">NAME</span></code>, which must be a valid identifier.  All ordinary commands are valid inside a section (including other section commands).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">end</span></code></p>
<p>End the section that was most recently opened and not yet closed.  All the constants that were in the export namespace of that section (i.e. those defined with <code class="docutils literal notranslate"><span class="pre">def</span></code> and <code class="docutils literal notranslate"><span class="pre">axiom</span></code> or imported from elsewhere with <code class="docutils literal notranslate"><span class="pre">export</span></code>) are prefixed by the name of that section and merged into the previous namespace.  (See namespaces, below.)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">quit</span></code></p>
<p>Terminate execution of the current compilation unit.  Whenever this command is found, loading of the current file or command-line string ceases, just as if the file or string had ended right there.  Execution then continues as usual with any file that imported the current one, with the next file or string on the command line, or with interactive mode if that was requested.  The command <code class="docutils literal notranslate"><span class="pre">quit</span></code> in interactive mode exits the program (you can also exit interactive mode by typing Control+D).</p>
</li>
</ol>
<p>In interactive mode, the following additional commands are also available.  (However, they are mostly intended for use in the ProofGeneral backend, see below.)</p>
<ol class="arabic simple">
<li><p>Display the context and type of a specific open hole number <code class="docutils literal notranslate"><span class="pre">HOLE</span></code>, or of all the open holes (see below).</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>show<span class="w"> </span>hole<span class="w"> </span>HOLE
show<span class="w"> </span>holes
</pre></div>
</div>
<ol class="arabic" start="2">
<li><p><code class="docutils literal notranslate"><span class="pre">solve</span> <span class="pre">HOLE</span> <span class="pre">≔</span> <span class="pre">TERM</span></code></p>
<p>Fill hole number <code class="docutils literal notranslate"><span class="pre">HOLE</span></code> with the term <code class="docutils literal notranslate"><span class="pre">TERM</span></code> (see below).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">undo</span> <span class="pre">N</span></code></p>
<p>Undo the last <code class="docutils literal notranslate"><span class="pre">N</span></code> commands that modify the global state, rewinding to a previous situation.  This includes all commands except <code class="docutils literal notranslate"><span class="pre">echo</span></code>, <code class="docutils literal notranslate"><span class="pre">synth</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span></code>, and <code class="docutils literal notranslate"><span class="pre">solve</span></code>: those commands are skipped over when undoing.  (Of course <code class="docutils literal notranslate"><span class="pre">solve</span></code> does modify the global state, but it is not undoable because it doesn’t affect the “processed position” in ProofGeneral.)  The command <code class="docutils literal notranslate"><span class="pre">undo</span></code> itself is also not “undoable” and there is no “redo”: after a command is undone, it is lost permanently from Narya’s memory (although you can press Up-arrow or Meta+P to find it in the interactive history and re-execute it).  Following an <code class="docutils literal notranslate"><span class="pre">undo</span></code> with another <code class="docutils literal notranslate"><span class="pre">undo</span></code> will just undo additional commands: <code class="docutils literal notranslate"><span class="pre">undo</span> <span class="pre">1</span></code> followed by <code class="docutils literal notranslate"><span class="pre">undo</span> <span class="pre">1</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">undo</span> <span class="pre">2</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">display</span> <span class="pre">SETTING</span></code></p>
<p>Set one of the display settings (that are also set by command-line flags).  Possible display settings are</p>
</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>display<span class="w"> </span>chars<span class="w"> </span>≔<span class="w"> </span>unicode
display<span class="w"> </span>chars<span class="w"> </span>≔<span class="w"> </span>ascii
display<span class="w"> </span>chars<span class="w"> </span>≔<span class="w"> </span>toggle
display<span class="w"> </span><span class="k">function</span><span class="w"> </span>boundaries<span class="w"> </span>≔<span class="w"> </span>on
display<span class="w"> </span><span class="k">function</span><span class="w"> </span>boundaries<span class="w"> </span>≔<span class="w"> </span>off
display<span class="w"> </span><span class="k">function</span><span class="w"> </span>boundaries<span class="w"> </span>≔<span class="w"> </span>toggle
display<span class="w"> </span><span class="nb">type</span><span class="w"> </span>boundaries<span class="w"> </span>≔<span class="w"> </span>on
display<span class="w"> </span><span class="nb">type</span><span class="w"> </span>boundaries<span class="w"> </span>≔<span class="w"> </span>off
display<span class="w"> </span><span class="nb">type</span><span class="w"> </span>boundaries<span class="w"> </span>≔<span class="w"> </span>toggle
</pre></div>
</div>
</section>
<section id="proofgeneral-mode">
<h2>ProofGeneral mode<a class="headerlink" href="#proofgeneral-mode" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://proofgeneral.github.io/">ProofGeneral</a> is a generic development environment designed for proof assistants that runs inside the text editor Emacs.  Proof General is perhaps best known for its use with <a class="reference external" href="https://rocq-prover.org/">Rocq</a>.  Narya comes with a basic ProofGeneral mode.  Narya does not yet have a true interactive <em>proof</em> mode, which ProofGeneral is designed for, but it is still useful for progressive processing of commands in a file.  In addition, the Narya ProofGeneral mode is enhanced with commands for creating, inspecting, and filling holes, similar to Agda’s Emacs mode.</p>
<section id="basic-usage">
<h3>Basic usage<a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h3>
<p>Once Narya’s ProofGeneral mode is installed as described above, it should start automatically when you open a file with the <code class="docutils literal notranslate"><span class="pre">.ny</span></code> extension.  When ProofGeneral mode is active, there is some initial segment of the buffer (which starts out empty) that has been processed (sent to Narya) and is highlighted with a background color (usually blue).  The unprocessed part of the buffer can be freely edited, and as you complete new commands you can process them as well one by one.  You can also undo or “retract” processed commands, removing them from the processed region.  If you edit any part of the processed region (except for editing inside an existing comment, or filling a hole with <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-SPC</span></code> as described below), it will automatically be retracted (using Narya’s <code class="docutils literal notranslate"><span class="pre">undo</span></code> command) up to the point where you are editing.</p>
<p>In addition to the main window displaying your source file, there will normally be two other windows in split-screen labeled “goals” and “response” (although this can be customized with the Emacs variable <code class="docutils literal notranslate"><span class="pre">proof-three-window-enable</span></code>).  The “response” window displays Narya’s informational and error messages.  The “goals” window displays the contexts and types of holes whenever relevant.</p>
</section>
<section id="key-commands">
<h3>Key commands<a class="headerlink" href="#key-commands" title="Link to this heading"></a></h3>
<p>The most useful ProofGeneral key commands for Narya are the following.  As usual in Emacs, <code class="docutils literal notranslate"><span class="pre">C-a</span></code> means hold down the Control key and press <code class="docutils literal notranslate"><span class="pre">a</span></code>, then release both.  Similarly, <code class="docutils literal notranslate"><span class="pre">C-M-a</span></code> means hold down both Control and Meta (usually the same as “Alt”) and press <code class="docutils literal notranslate"><span class="pre">a</span></code>, then release them all.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-n</span></code> : Process the next unprocessed command.  Since Narya has no command-terminating string, the “next command” is interpreted as continuing until the following command keyword or until the end of the buffer.  This means that if you’ve written a complete command but there is garbage following it, in order to process the command you’ll need to either comment out the garbage or insert at least the beginning of another command in between (such as <code class="docutils literal notranslate"><span class="pre">quit</span></code>) so that ProofGeneral can find the end of the command you want to process.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-u</span></code> : Retract the last processed command.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">RET</span></code> : Move the processed/unprocessed boundary to (approximately) the current cursor location, processing or retracting as necessary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-b</span></code> : Process the entire buffer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-r</span></code> : Retract the entire buffer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-.</span></code> : Move the cursor to the end of the processed region.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-M-a</span></code> : Move the cursor to the beginning of the command it is inside.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-M-e</span></code> : Move the cursor to the end of the command it is inside.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-v</span></code> : Read a “state-preserving” command from the minibuffer and execute it, displaying its output in the result buffer.  Currently the only state-preserving commands are <code class="docutils literal notranslate"><span class="pre">echo</span></code>, <code class="docutils literal notranslate"><span class="pre">synth</span></code>, <code class="docutils literal notranslate"><span class="pre">show</span></code>, and <code class="docutils literal notranslate"><span class="pre">display</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-c</span></code> : Interrupt Narya if a command is taking too long.  Narya attempts to recover, but its state may be unreliable afterwards.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-x</span></code> : Retract the buffer and kill the Narya subprocess.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M-;</span></code> : Insert a comment, remove a comment, or comment out a region.  This is a standard Emacs command, but is customized to use line comments on code lines and block comments elsewhere.</p></li>
</ul>
<p>As noted above, Narya’s ProofGeneral mode is enhanced to deal with open holes (see below).  Whenever a hole is created by processing a command, the location of the hole is highlighted in <code class="docutils literal notranslate"><span class="pre">narya-hole-face</span></code> (which you can customize).  These highlights are removed when hole-creating commands are retracted.</p>
<p>Narya’s ProofGeneral mode also defines the following additional key commands.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">;</span></code> : Read a term from the minibuffer and normalize it (like <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-v</span></code> with <code class="docutils literal notranslate"><span class="pre">echo</span></code>), perhaps in the context of the current hole.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">:</span></code> : Read a term from the minibuffer and synthesize its type (like <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-v</span></code> with <code class="docutils literal notranslate"><span class="pre">synth</span></code>), perhaps in the context of the current hole.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-?</span></code> : Show the contexts and types of all open holes (like <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-v</span></code> with <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">holes</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-,</span></code> : Show the context and type of the hole under point (like <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-v</span></code> with <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">hole</span></code>, except that you don’t need to know the hole number).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-j</span></code> : Move the cursor to the position of the next open hole.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-k</span></code> : Move the cursor to the position of the previous open hole.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-SPC</span></code> : Fill the hole under point with a specified term, without retracting any code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-d</span> <span class="pre">C-u</span></code>: Toggle display of unicode characters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-d</span> <span class="pre">C-f</span></code>: Toggle display of function boundaries.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-d</span> <span class="pre">C-t</span></code>: Toggle display of type boundaries.</p></li>
</ul>
</section>
<section id="for-agda-users">
<h3>For Agda users<a class="headerlink" href="#for-agda-users" title="Link to this heading"></a></h3>
<p>Agda users should beware: while a few of Narya’s key commands are chosen to match those of Agda (like <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-?</span></code> and <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-SPC</span></code> and <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-,</span></code>), many of the key sequences used by Agda have already been defined in ProofGeneral to mean something else (notable examples are <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-n</span></code> and <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-b</span></code> and <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-.</span></code>), leading Narya to choose different ones.  For reference, here is a mapping of Agda keybindings to approximately comparable Narya ones:</p>
<ul class="simple">
<li><p>Instead of <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-l</span></code>, use <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-b</span></code> (process the whole buffer).</p></li>
<li><p>Instead of <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-f</span></code>, use <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-j</span></code> (move to the next hole).</p></li>
<li><p>Instead of <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-b</span></code>, use <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-k</span></code> (move to the previous hole).</p></li>
<li><p>Instead of <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-n</span></code>, use <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">;</span></code> (normalize a term, perhaps in hole context).</p></li>
<li><p>Instead of <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-d</span></code>, use <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">:</span></code> (synthesize a term, perhaps in hole context).</p></li>
<li><p>Instead of <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-.</span></code>, use <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">:</span></code>  (synthesize a term) and <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-,</span></code> (display hole context).</p></li>
<li><p>Instead of <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-x</span> <span class="pre">C-q</span></code>, use <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-x</span></code> (quit Narya subprocess).</p></li>
<li><p>Instead of <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-x</span> <span class="pre">C-a</span></code>, use <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-c</span></code> (interrupt a command).</p></li>
</ul>
<p>If there is significant demand, we could implement a configuration option that instead preferentially chooses Agda’s key bindings, moving the conflicting ProofGeneral bindings to other key sequences.</p>
</section>
<section id="syntax-highlighting">
<h3>Syntax highlighting<a class="headerlink" href="#syntax-highlighting" title="Link to this heading"></a></h3>
<p>Narya’s ProofGeneral mode uses Emacs’ font-lock system for syntax highlighting.  This is only approximately correct as it uses simple regexps, but it’s fairly good, and can highlight code that hasn’t been processed yet and wouldn’t even parse.  It uses the following Emacs “faces”, which you may want to customize, particularly because some of them are not configured by default to have any noticable color.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">font-lock-keyword-face</span></code>: commands such as <code class="docutils literal notranslate"><span class="pre">def</span></code> and <code class="docutils literal notranslate"><span class="pre">axiom</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font-lock-builtin-face</span></code>: keywords such as <code class="docutils literal notranslate"><span class="pre">let</span></code> and <code class="docutils literal notranslate"><span class="pre">match</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font-lock-function-name-face</span></code>: names of constants currently being defined or assumed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font-lock-constant-face</span></code>: constructor names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font-lock-number-face</span></code>: numerals.  I suggest making this face look the same as <code class="docutils literal notranslate"><span class="pre">font-lock-constant-face</span></code>, since numerals are just a shorthand for constructor sequences.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font-lock-property-name-face</span></code>: field and method names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font-lock-variable-name-face</span></code>: variables currently being bound by abstractions, let-bindings, as parameters, in the domains of dependent function-types, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font-lock-bracket-face</span></code>: parentheses, brackets, and braces.  Note that this inherits by default from <code class="docutils literal notranslate"><span class="pre">font-lock-punctuation-face</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font-lock-operator-face</span></code>: single-character operators like → and ASCII operators such as <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code>.</p></li>
</ul>
<p>ProofGeneral also uses some of its own faces that you may want to customize, such as the following.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">proof-locked-face</span></code>: the background highlight of the processed region.</p></li>
</ul>
<p>And Narya defines some of its own faces as well.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">narya-hole-face</span></code>: the background highlight of open holes.</p></li>
</ul>
</section>
<section id="entering-unicode-characters">
<h3>Entering Unicode characters<a class="headerlink" href="#entering-unicode-characters" title="Link to this heading"></a></h3>
<p>When editing Narya files in Emacs, you will probably also want an input-mode for entering Unicode characters.  Narya does not have its own such mode.  I use the one that ships with Agda, customized by adding the following to <code class="docutils literal notranslate"><span class="pre">agda-input-user-translations</span></code>:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">(&quot;r|&quot;</span> <span class="pre">&quot;↦&quot;)</span>
<span class="pre">(&quot;|-&gt;&quot;</span> <span class="pre">&quot;↦&quot;)</span>
<span class="pre">(&quot;|=&gt;&quot;</span> <span class="pre">&quot;⤇&quot;)</span>
<span class="pre">(&quot;R|&quot;</span> <span class="pre">&quot;⤇&quot;)</span>
<span class="pre">(&quot;...&quot;</span> <span class="pre">&quot;…&quot;)</span>
<span class="pre">`</span></code>
With this customization added, the Unicode characters that have primitive meanings to Narya can all be entered with short commands:</p>
<ul class="simple">
<li><p>For →, type <code class="docutils literal notranslate"><span class="pre">\r</span></code> or <code class="docutils literal notranslate"><span class="pre">\to</span></code></p></li>
<li><p>For ↦, type <code class="docutils literal notranslate"><span class="pre">\r|</span></code> or <code class="docutils literal notranslate"><span class="pre">\|-&gt;</span></code></p></li>
<li><p>For ⤇, type <code class="docutils literal notranslate"><span class="pre">\R|</span></code> or <code class="docutils literal notranslate"><span class="pre">\|=&gt;</span></code></p></li>
<li><p>For ≔, type <code class="docutils literal notranslate"><span class="pre">\:=</span></code></p></li>
<li><p>For …, type <code class="docutils literal notranslate"><span class="pre">\...</span></code></p></li>
</ul>
<p>(These particular characters will be automatically converted from their ASCII versions to their Unicode equivalents by Narya’s reformatter (assuming <code class="docutils literal notranslate"><span class="pre">display</span> <span class="pre">chars</span></code> is set to <code class="docutils literal notranslate"><span class="pre">unicode</span></code>), so it is not necessary to enter them manually.  But you will probably want to enter other Unicode characters at some point as well.)</p>
</section>
<section id="other-customization">
<h3>Other customization<a class="headerlink" href="#other-customization" title="Link to this heading"></a></h3>
<p>Some other ProofGeneral customization options you may want to consider are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">proof-output-tooltips</span></code>: I recommend turning this off, as the “output” that it displays in tooltips is not very readable or helpful.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">proof-shrink-windows-tofit</span></code>: Note that this only affects windows that take up the full width of the frame, and in particular has no effect in the default three-window mode.  However, Narya’s ProofGeneral mode includes some custom code (copied from the Rocq mode) that resizes the response window in three-window mode as well.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">narya-prog-args</span></code>: If you want to pass command-line options to alter the behavior of Narya, such as the options like <code class="docutils literal notranslate"><span class="pre">-dtt</span></code> that modify the type theory, at present the only way to do this is to change this variable.  You can do that globally, or locally in particular <code class="docutils literal notranslate"><span class="pre">ny</span></code> files with Emacs file-local variables.  If you do change this variable, make sure to keep the argument <code class="docutils literal notranslate"><span class="pre">-proofgeneral</span></code> in it, which is necessary to put Narya into the correct mode for interacting with ProofGeneral.</p></li>
</ul>
</section>
</section>
<section id="code-formatter">
<h2>Code formatter<a class="headerlink" href="#code-formatter" title="Link to this heading"></a></h2>
<p>Narya comes with an “opinionated code formatter” like <a class="reference external" href="https://go.dev/blog/gofmt">gofmt</a>, <a class="reference external" href="https://github.com/ocaml-ppx/ocamlformat">ocamlformat</a>, or <a class="reference external" href="https://prettier.io/docs/why-prettier">prettier</a>.  In fact, the formatter is built into Narya, using the same parser and pretty-printer as the typechecker; so they should never get out of sync as the language changes.</p>
<p>There are currently two ways to use the formatter.  Firstly, every time you run Narya on a source file, it automatically reformats that file.  (It only reformats files supplied explictly on the command line, not other files loaded by these.)  If this resulted in any changes, it copies the original file to a backup file with a <code class="docutils literal notranslate"><span class="pre">.bak.N</span></code> extension; this is a temporary feature to ensure you can recover your code in case of bugs in the reformatter, and will probably go away once there is enough evidence that the reformatter is trustworthy.  (Please report any bugs in the reformatter, especially serious ones that change the meaning of the code, make it non-reparseable, lose comments, etc.!  Also, reformatting is supposed to be idempotent: if reformatting code twice without editing it in the middle makes any changes the second time, that is also a bug.)</p>
<p>Secondly, every time you process a command in ProofGeneral, that command is automatically reformatted.  If you retract the command, it remains reformatted.  To undo the reformatting, you can use Emacs’ undo operation (<code class="docutils literal notranslate"><span class="pre">C-/</span></code>); this will also retract the command, if it is still in the processed region.</p>
<p>Processing an entire file in ProofGeneral does not have <em>exactly</em> the same reformatting effect as running Narya on it from the command line.  They should reformat individual commands in the same way, but the command-line reformatter also ensures that distinct commands are separated by single blank lines (suitably interpreted in the presence of comments).  ProofGeneral can’t do this, as it doesn’t even pass blank lines and comments between commands to the Narya subprocess.  However, most people already separate their commands by single blank lines, so this difference is not usually a serious issue.  If a file has been formatted by the command-line reformatter, processing it in Proof General should not <em>change</em> that formatting (if it does, please report a bug).</p>
<p>It is not currently possible to reformat code without simultaneously typechecking it.  The presence of user-definable mixfix notations that can also be imported from other files means that any reformatter must be at least partially context-aware.  It would probably be possible to implement a reformatter that resolves user-defined notations without typechecking definitions, but this is not a high priority.</p>
<p>Currently there is only one configuration option for the code formatter: whether to print Unicode characters such as → or their ASCII equivalents such as <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code>.  This can be set on the command line with the flags <code class="docutils literal notranslate"><span class="pre">-unicode</span></code> and <code class="docutils literal notranslate"><span class="pre">-ascii</span></code>, and in ProofGeneral with the state-preserving <code class="docutils literal notranslate"><span class="pre">display</span></code> command.  In accord with the goal of opinionated code formatters – to eliminate time wasted by arguing about formatting, including formatter options – I do not plan to add more configuration options; although I’ll listen if you have a case to make for one.  Suggestions for improvements and changes to the standard formatting style are also welcome, although I can’t promise to adopt them.</p>
<p>It is possible to turn off the code formatter.  The Emacs customization variables <code class="docutils literal notranslate"><span class="pre">narya-reformat-commands</span></code> and <code class="docutils literal notranslate"><span class="pre">narya-reformat-holes</span></code> (see below) will turn off reformatting in ProofGeneral, and the command-line option <code class="docutils literal notranslate"><span class="pre">-no-format</span></code> will turn off reformatting of input files.  However, if you don’t like the way Narya reformats your code, I would appreciate it if you give me feedback about this rather than (or, at least, in addition to) turning it off entirely.</p>
</section>
<section id="jsnarya">
<span id="top-level-interface-jsnarya"></span><h2>jsNarya<a class="headerlink" href="#jsnarya" title="Link to this heading"></a></h2>
<p>As mentioned above, jsNarya is a JavaScript version of Narya that runs in a browser.  Its functionality is limited to the equivalent of <code class="docutils literal notranslate"><span class="pre">narya</span> <span class="pre">-e</span> <span class="pre">&quot;STARTUP&quot;</span> <span class="pre">-i</span></code>: you can specify a single startup “file” by copying and pasting it into a text box, and then you drop into interactive mode.  Also there is no real Unicode input-mode, although there is a palette of buttons that can be used to enter a number of common Unicode characters.  These limitations are not intrinsic; we just have not yet found or implemented an appropriate frontend for anything more complicated.</p>
<p>jsNarya does accept customization of the arity, direction name, and internality of parametricity, plus discreteness, as discussed below.  This can be done with input elements on the page before starting the interactive mode, or with appropriately-named URL parameters.  For instance, supplying the URL query string <code class="docutils literal notranslate"><span class="pre">?arity=1&amp;direction=d&amp;external</span></code> yields “Poor man’s dTT” (see below), and this special case admits the shortcut <code class="docutils literal notranslate"><span class="pre">?dtt</span></code>.  The startup code can also be specified in the URL with the <code class="docutils literal notranslate"><span class="pre">?startup=</span></code> parameter.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="built-in-types.html" class="btn btn-neutral float-right" title="Built-in types" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Michael Shulman.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>